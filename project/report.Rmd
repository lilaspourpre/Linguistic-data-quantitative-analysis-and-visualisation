---
title: "Speech emotion analysis: extralingustic feature influence on embarrasment detection for French and Russian"
date: 10.06.2018
authors: Natalia Borisenko and Irina Nikishina
output:
  html_document:
    toc: true
    toc_float: true
    code_folding: show

---

```{r setup, echo=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

### Materials  
[Link to the data set](https://github.com/lilaspourpre/Linguistic-data-quantitative-analysis-and-visualisation/blob/master/project/dataset_embarr.csv) (csv file)  
[Link to audio](https://github.com/lilaspourpre/Linguistic-data-quantitative-analysis-and-visualisation/tree/master/project/audio)    
[Link to questionnaire](https://docs.google.com/forms/d/e/1FAIpQLSf6uuyYNl8ZlWfX3knrF-04q35faGCwP83PXebmEK59VTFQCA/viewform)  

## Introduction  

### Describe the phenomenon.
Embarrassment as other emotions mainly is the object of studies of psychology. For instance, (Goffman, 1967) describes embarrassment as expression of opinion about our actions that do not suit the situation. (Borg et al., 1988) understand embarrassment as a type of shame, (Edelman, 1985) treats embarrassment as anxiety. The idea of these studies was to determine the notion of embarrassment and to understand the reasons of it. To add, these studies agree that there is such emotion as embarrassment but no study highlight if people can understand whether a person is embarrassed. There are several ways to understand it. First, as signals of embarrassment the mimic, the actions of a person can be considered. That is what was done by psychologists. Secondly, the linguistics features can be taken into account. That was described in the previous study that is mentioned below. However, the success in understanding embarrassment might base not only on the ability of a speaker to express it but also on the ability of a listener to understand it. In this study we try to understand if there is the connection between listeners’ characteristics as gender, age, level of education and foreign language command and this ability.

### Mention some previous research (optional).
This research is not started from scratch as it is based on the previous research of embarrassment on speech that was conducted as a part of the Research Seminar under the supervision of Bukharov V. M. during BA program. However, the current research is different from the previous one as extra linguistics factors are found under the examination. To add, the previous study was extended so in the current research not only Russian but also French is taken into consideration that allows to check whether the language command and the language of audios might affect the level of embarrassment recognition.  

## Research hypothesis  

As it has been already said we assume that mean embarrassment recognition value (hereinafter MERV) might depend on extra linguistic factors: gender, age, education and foreign language aquisition. Moreover, it is also important to discover whether embarressment in French is recognized "better" than embarressment in Russian. In other words, whether language of audio is important for embarresment detection. 


Thus, in the current research we formulate the following null hypothesis:
1) MERV doesn't depend on gender:
*  MERV doesn't depend on gender for Russian audios
*  MERV doesn't depend on gender for French audios
*  MERV doesn't depend on gender for all audios

2) MERV doesn't depend on age
* MERV doesn't depend on age for Russian audios
* MERV doesn't depend on age for French audios
* MERV doesn't depend on age for all audios

3) MERV doesn't depend on education level
* MERV doesn't depend on education level for Russian audios
* MERV doesn't depend on education level for French audios
* MERV doesn't depend on education level for all audios

4) MERV doesn't depend on the English language aquisition
* MERV doesn't depend on the English language aquisition for Russian audios
* MERV doesn't depend on the English language aquisition for French audios
* MERV doesn't depend on the English language aquisition for all audios

5) MERV doesn't depend on the Frenchh language aquisition
* MERV doesn't depend on the Frenchh language aquisition for Russian audios
* MERV doesn't depend on the Frenchh language aquisition for French audios
* MERV doesn't depend on the Frenchh language aquisition for all audios

All in all, as our null hypothesis for multi-factor analysis we assume that none of the above mentioned factor do not affect MERV results

6) Language in audio is not important for embarresment detection.

## Data  

Our dataset comprises 216 responces from questionnaire (described below). Our .csv file contains 216 rows and 25 columns

```{r dataset}
embarr <- read.csv("dataset_embarr.csv")
summary(embarr)
str(embarr)
```
* Our dependent variable is MERV -- mean embarrassement recognition value: average score for all/French/Russian audios. Its type is numerical (ratio) and belongs to the interval from 0 to 5.
Considering the fact that mean values for Russian, French and overall mean for each respondent are not included in the dataset we count it using the following code:

```{r dataset}
embarr %>%
  select(A1.1:E1.2) %>%
  rowMeans() -> embarr$meanRussian

embarr %>%
  select(A2.1:E2.2) %>%
  rowMeans() -> embarr$meanFrench

embarr %>%
  select(A1.1:E2.2) %>%
  rowMeans() -> embarr$meanCommon
```
 
Thus, we have 28 columns in total.

* Our predictor variables are mostly categorical:
1) age (categorical):
* 18-25
* 25-30
* 30-35
* 35-40
2) gender (categorical):
* M
* F
3) education (categorical):
* Secondary
* Higher
4) English knowledge (binary, categorical):
* 0 (no)
* 1 (yes)
5) French knowledge (binary, categorical):
* 0 (no)
* 1 (yes)

### Data collection and annotation   

From our previous research we took the following 5 phrases with possible embarrassment features:

* _Неужели этот огромный букет мне?_
* _Я написал(а) эту диссертацию за 10 дней._
* _Ну что вы, не надо было, я того не стою._
* _Перестаньте, мне было совсем не трудно._
* _Спасибо, без вашей помощи я бы не справился(ась)._

Each of those phrases were voiced and recorded by 2 native Russian speakers (M and F, 22 y.o.). 
However, in the current research we compare emberrassment detection for Russian and French, so we translated the above mentioned sentences (with a C1-level certificated interpreter and further native speaker revision) into French. Then we asked 2 native French speakers (M and F, 22 y.o.) to record the phrases. Source and target sentences are provided below:

| Russian | French |
| --- | --- |
|Неужели этот огромный букет мне? | Est-ce que ce gros bouquet de fleurs est vraiment pour moi?|
|Я написал(а) эту диссертацию за 10 дней. | J'ai écrit cette thèse en 10 jours|
|Ну что вы, не надо было, я того не стою.| Arrêtez, vous n'auriez pas dû faire ça, je n'en vaux pas la peine|
|рестаньте, мне было совсем не трудно.| Allez, ça va, c'était pas du tout difficile pour moi |
|Спасибо, без вашей помощи я бы не справился(ась)| Merci beaucoup pour votre aide, je n'aurais jamais réussi seul|

After that, we ran a questionnaire with 5 questions of "hard data" type (age, gender, education, foreign languages) and 20 questions about embarrassment measurement in audios. The respondents we suggested to listen to each audio (with Russian and French records) and to score embarrassment expression level in each audio from 0 to 5.

We also discovered the appropriate number of respondents considering the amount of parameters (predictor variables) and with the usage of power test. We use the following code:

```{power test}
power.anova.test(groups = 64, between.var = 1, within.var = 3,
                 power = .95)
```
Number of groups = 2(levels of gender) * 4 (levels of age) * 2 (levels of education) * 2 (levels of English aquisition) * 2 (levels of french aquisition) = 2 * 4 * 2 * 2 * 2 = 2^6 = 64. We suppose betweeb.var=1 and within.var as signifiant. Thus, our minimum number of respondents should not be less than 3 * 64 = 192. By the start of our research, the questionnaire included 216 responces. 

However, before converting our results to .csvfile we slightly change questionnaire format to machine-readable and interpretable format. For instance, question about language aquisition has the form of multiple choice (English, French, German and other foreign languages), while for analysis we selected binary type for English and French columns/parameters/features. Moreover, we divided respondents into 5 different gropups by age.

It is rather obvious that our dataset is not as brilliant as it might seem at first glance. Binary type of language aquisition does not represent the actual language knowledge. The same problem might appear with age. 

### Data considerations
Discuss research design (if applicable), independence, autocorrelation, nestedness of data, possible biases, etc.


## R libraries in use
```{r libraries}
library(tidyverse)
# include R libraries here or later
```


## Analysis: descriptive statistics
In this section you can put tables and plots that show data distribution for individual variables and distribution for pairs of variables. Histograms, density plots, boxplots (or violin plots), mosaic plots are recommended. You can also provide some basic statistical analysis, such as correlation, statistical significance, t-test and other simple tests. If you calculate a chi-square statistic, do not forget to estimate the effect size.


First of all, we counted all posible statistical info:

| Age | NumOfRespondents |
| --- | --- |
| 18-25| 57 |
| 26-30 | 52 |
| 31-35 | 52 |
| 36-40 | 55 |


| Gender | NumOfRespondents |
| --- | --- |
| F | 107 |
| M | 109 |

| Education | NumOfRespondents |
| --- | --- |
| Higher | 112 |
| Secondary | 104 |

| English | NumOfRespondents |
| --- | --- |
| 0 | 103 |
| 1 | 113 |

| French | NumOfRespondents |
| --- | --- |
| 0 | 109 |
| 1 | 107 |

Moreover, we also counted mean, max and min values for Russian audios, French audios and both in common: 

| Language of audio | Mean | Max | Min |
| --- | --- | --- | --- | 
| French | 2.315 | 5 | 0 | 
| Russian | 1.910 | 5 | 0 | 
| Both | 2.113 | 5 | 0 | 

We can see that difference of mean values for Russian and French are slightly different. That is why we use t-test in order to discover whether this difference is staticstically significant.


```{r}
embarr.FrRu <- c(embarr$meanFrench, embarr$meanRussian)
language <- c(rep("ru", times=216),rep("fr", times=216))
embarr.FrRu.Sums <- data.frame(embarr.FrRu, language)

```
Here we create a new data.frame with two columns: mean value and language/ Then we apply t-test.


```{r}
library(tidyverse)
embarr.FrRu.Sums %>% 
  ggplot(aes(embarr.FrRu, fill = language, color = language))+
  geom_density(alpha = 0.9)+
  geom_rug()+
  labs(title="Mean values for Russian and French audios", x="mean") +
  theme_bw()
```
![alt text](https://github.com/lilaspourpre/Linguistic-data-quantitative-analysis-and-visualisation/blob/master/project/img/commonMean.PNG)

```{r RuAndFr}
t.test(embarr.FrRu.Sums[embarr.FrRu.Sums$language == "ru", ]$embarr.FrRu,
       embarr.FrRu.Sums[embarr.FrRu.Sums$language == "fr", ]$embarr.FrRu)
```
We see that p-value is < 0.05, then we may assume that this result is statistically significant (differnece between mean scores is statistically significant)

Moreover, we count correlation between mean values for Russian audios and French audios. 

```{r}
embarr %>% 
  summarise(cor = cor(meanFrench, meanRussian))
```

cor = 0.253794 that demonstrates that the results have weak positive correlation

## Multi-factor analysis  
At least two different methods have to be used. Please provide the output models summaries and graphs. Please evaluate your models (show and interpret relevant indicators such as classification accuracy, goodness of fit, classification power, inertia, variable significance, variable importance, etc.).   
It is recommended to report, when needed, how did you fit the model, did you find any signs of overfitting, why do you believe that certain model is an optimal one, etc.

## Linguistic interpretation of the quantitative results  

## Discussion on data distribution and quantitative methods in use   

In conclusion, you can suggest ideas for further development of your research (correction of hypotheses, work with the data, their statistical analysis).
